import{_ as M}from"./Dzup3tpv.js";import{u as R,_ as D}from"./TWhVIJrq.js";import{m as T,e as N,_ as G,f as J,c as p,o as m,a as f,g as A,n as c,r as v,h as g,i as S,F as k,d as b,t as E,j as Y,k as P,l as H,p as z,q as V,s as L,v as U,x as K,y as Q,z as W,A as X,B as Z,b as y,w as j,C as h}from"./BUcYa01A.js";import{u as _}from"./ChGbc9Ds.js";import{_ as x}from"./CYi_maFl.js";import{u as ee}from"./DEEVIwE6.js";import"./ZLFFUBy4.js";import"./DAzf46mh.js";import"./vkYvzIJb.js";const re={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},I=T(N.ui.strategy,N.ui.formGroup,re),te=J({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(I.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:t,attrs:r}=R("formGroup",P(e,"ui"),I,P(e,"class")),i=H("form-errors",null),n=z(()=>e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:i?.value?.find(u=>u.path===e.name)?.message),l=z(()=>t.value.size[e.size??I.default.size]),a=V(L());return U("form-group",{error:n,inputId:a,name:z(()=>e.name),size:z(()=>e.size),eagerValidation:z(()=>e.eagerValidation)}),{ui:t,attrs:r,inputId:a,size:l,error:n}}}),ae=["for"];function se(e,t,r,i,n,l){return m(),p("div",S({class:e.ui.wrapper},e.attrs),[f("div",{class:c(e.ui.inner)},[e.label||e.$slots.label?(m(),p("div",{key:0,class:c([e.ui.label.wrapper,e.size])},[f("label",{for:e.inputId,class:c([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?v(e.$slots,"label",g(S({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),p(k,{key:1},[b(E(e.label),1)],64))],10,ae),e.hint||e.$slots.hint?(m(),p("span",{key:0,class:c([e.ui.hint])},[e.$slots.hint?v(e.$slots,"hint",g(S({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),p(k,{key:1},[b(E(e.hint),1)],64))],2)):A("",!0)],2)):A("",!0),e.description||e.$slots.description?(m(),p("p",{key:1,class:c([e.ui.description,e.size])},[e.$slots.description?v(e.$slots,"description",g(S({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),p(k,{key:1},[b(E(e.description),1)],64))],2)):A("",!0)],2),f("div",{class:c([e.label?e.ui.container:""])},[v(e.$slots,"default",g(Y({error:e.error}))),typeof e.error=="string"&&e.error?(m(),p("p",{key:0,class:c([e.ui.error,e.size])},[e.$slots.error?v(e.$slots,"error",g(S({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),p(k,{key:1},[b(E(e.error),1)],64))],2)):e.help||e.$slots.help?(m(),p("p",{key:1,class:c([e.ui.help,e.size])},[e.$slots.help?v(e.$slots,"help",g(S({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(m(),p(k,{key:1},[b(E(e.help),1)],64))],2)):A("",!0)],2)],16)}const ne=G(te,[["render",se]]);class B extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,B.prototype)}}const oe=J({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:t,emit:r}){const i=L(),n=_(`form-${i}`),l=V(null);Q(()=>{n.on(async s=>{s.type!=="submit"&&e.validateOn?.includes(s.type)&&await w(s.path,{silent:!0})})}),W(()=>{n.reset()});const a=V([]);U("form-errors",a),U("form-events",n);const u=V({});U("form-inputs",u);async function $(){let s=await e.validate(e.state);if(e.schema){const{errors:o,result:d}=await ve(e.state,e.schema);o?s=s.concat(o):l.value=d}return s}async function w(s,o={silent:!1}){let d=s;if(s&&!Array.isArray(s)&&(d=[s]),d){const F=a.value.filter(C=>!d.includes(C.path)),q=(await $()).filter(C=>d.includes(C.path));a.value=F.concat(q)}else a.value=await $();if(a.value.length>0){if(o.silent)return!1;throw new B(`Form validation failed: ${JSON.stringify(a.value,null,2)}`)}return e.state}async function O(s){const o=s;try{e.validateOn?.includes("submit")&&await w(),o.data=e.schema?l.value:e.state,r("submit",o)}catch(d){if(!(d instanceof B))throw d;const F={...o,errors:a.value.map(q=>({...q,id:u.value[q.path]}))};r("error",F)}}return t({validate:w,errors:a,setErrors(s,o){o?a.value=a.value.filter(d=>d.path!==o).concat(s):a.value=s},async submit(){await O(new Event("submit"))},getErrors(s){return s?a.value.filter(o=>o.path===s):a.value},clear(s){s?a.value=a.value.filter(o=>o.path!==s):a.value=[]}}),{onSubmit:O,errors:X(a)}}});function ie(e){return e.validate&&e.__isYupSchema__}function le(e){return e.inner!==void 0}function ue(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function de(e){return e.validateAsync!==void 0&&e.id!==void 0}function pe(e){return e.isJoi===!0}function me(e){return"~standard"in e}async function fe(e,t){const r=await t["~standard"].validate(e);return!r.issues||r.issues.length===0?{errors:null,result:"value"in r?r.value:null}:{errors:r.issues.map(n=>({path:n.path?.map(l=>typeof l=="object"?l.key:l).join(".")||"",message:n.message})),result:null}}async function ce(e,t){try{return{errors:null,result:await t.validateAsync(e,{abortEarly:!1})}}catch(r){if(pe(r))return{errors:r.details.map(n=>({path:n.path.join("."),message:n.message})),result:null};throw r}}async function ye(e,t){const[r,i]=t.validate(e);return r?{errors:r.failures().map(l=>({message:l.message,path:l.path.join(".")})),result:null}:{errors:null,result:i}}async function he(e,t){try{return{errors:null,result:await t.validate(e,{abortEarly:!1})}}catch(r){if(le(r))return{errors:r.inner.map(n=>({path:n.path??"",message:n.message})),result:null};throw r}}function ve(e,t){if(me(t))return fe(e,t);if(de(t))return ce(e,t);if(ie(t))return he(e,t);if(ue(t))return ye(e,t);throw new Error("Form validation failed: Unsupported form schema")}function ge(e,t,r,i,n,l){return m(),p("form",{onSubmit:t[0]||(t[0]=K((...a)=>e.onSubmit&&e.onSubmit(...a),["prevent"]))},[v(e.$slots,"default",g(Y({errors:e.errors})))],32)}const be=G(oe,[["render",ge]]),we={class:"min-h-screen bg-background"},Se={class:"flex min-h-screen items-center justify-center"},$e={class:"w-full max-w-md space-y-8"},ke={class:"text-center"},Fe={__name:"login",setup(e){const t=ee(),r=Z({email:"",password:""}),i=V(!1),n={email:{type:"string",required:!0},password:{type:"string",required:!0}},l=async()=>{i.value=!0;try{await t.login(r)}catch(a){console.error("Login failed:",a)}finally{i.value=!1}};return(a,u)=>{const $=M,w=ne,O=D,s=be,o=x;return m(),p("div",we,[f("div",Se,[f("div",$e,[u[4]||(u[4]=f("div",{class:"text-center"},[f("h1",{class:"text-3xl font-bold text-foreground"},"Admin Login"),f("p",{class:"mt-2 text-muted-foreground"},"Sign in to access the admin panel")],-1)),y(s,{schema:n,state:h(r),class:"space-y-4",onSubmit:l},{default:j(()=>[y(w,{label:"Email",name:"email"},{default:j(()=>[y($,{modelValue:h(r).email,"onUpdate:modelValue":u[0]||(u[0]=d=>h(r).email=d),type:"email",placeholder:"admin@example.com",required:""},null,8,["modelValue"])]),_:1}),y(w,{label:"Password",name:"password"},{default:j(()=>[y($,{modelValue:h(r).password,"onUpdate:modelValue":u[1]||(u[1]=d=>h(r).password=d),type:"password",placeholder:"Enter your password",required:""},null,8,["modelValue"])]),_:1}),y(O,{type:"submit",block:"",loading:h(i),disabled:h(i)},{default:j(()=>[...u[2]||(u[2]=[b(" Sign In ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["state"]),f("div",ke,[y(o,{to:"/portal",class:"text-primary hover:underline"},{default:j(()=>[...u[3]||(u[3]=[b(" Go to User Portal ",-1)])]),_:1})])])])])}}};export{Fe as default};
