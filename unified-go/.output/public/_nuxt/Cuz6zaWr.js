import{_ as Pe}from"./TWhVIJrq.js";import{_ as he}from"./BAwcxMjs.js";import{_ as Fe,a as Ae}from"./CLuzgwfI.js";import{_ as je}from"./DDnXcZAG.js";import{_ as Me}from"./DQxZl4Gi.js";import{_ as Be}from"./Dzup3tpv.js";import{_ as Ee}from"./BaZuvFz9.js";import{useReputationPhase5Api as He}from"./DUWfgsoE.js";import{P as ne}from"./CSm6nba8.js";import{L as Q}from"./BZDPJRid.js";import{C as Oe}from"./CTmKcadR.js";import{c as O}from"./BDTT5SEM.js";import{P as We}from"./-lBS8n-0.js";import{C as ze}from"./98tBQm4Q.js";import{f as Le,q as _,y as $e,c as v,a as s,b as t,E as g,g as C,w as l,D as m,o as u,d as n,C as f,F as h,G as F,t as r,n as Re}from"./BUcYa01A.js";import"./DAzf46mh.js";import"./CYi_maFl.js";import"./ZLFFUBy4.js";import"./ChGbc9Ds.js";import"./vkYvzIJb.js";const qe=O("CircleCheckIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ue=O("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Ge=O("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Je=O("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ke={class:"space-y-6"},Qe={class:"flex items-center justify-between"},Xe={key:0,class:"flex items-center justify-center py-12"},Ye={key:1,class:"text-center py-12"},Ze={class:"space-y-1"},et={class:"flex justify-between text-xs"},tt={key:0,class:"text-green-600"},lt={class:"flex justify-end gap-2"},at={class:"space-y-4 py-4"},st={class:"space-y-2"},ot={class:"space-y-2"},nt={class:"space-y-2"},ut={key:0,class:"space-y-4"},dt={class:"space-y-2"},rt={class:"grid grid-cols-5 gap-2"},it={class:"text-xs font-medium"},mt={class:"flex items-center justify-center"},pt={key:1,class:"space-y-2"},ct={class:"grid grid-cols-5 gap-2 mt-2"},vt={class:"font-medium"},_t={key:0,class:"space-y-6 py-4"},ft={class:"grid grid-cols-4 gap-4"},yt={class:"text-lg font-bold"},gt={class:"text-2xl font-bold"},xt={class:"text-2xl font-bold"},bt={class:"space-y-2"},Ct={class:"flex-1"},wt={class:"text-sm font-medium"},Ut={class:"text-xs text-gray-500"},Rt=Le({__name:"index",setup(Dt){const{getCustomWarmupSchedule:de,createCustomWarmupSchedule:re,updateCustomWarmupSchedule:ie,deleteCustomWarmupSchedule:me,getWarmupTemplates:pe}=He(),w=_([]),A=_(["example.com","mail.example.com"]),ce=_([]),j=_(!1),x=_(!1),b=_(null),D=_(!1),M=_(!1),T=_(!1),k=_(!1),d=_({domain:"",template_type:"moderate",start_date:new Date().toISOString().split("T")[0],daily_volumes:{}}),p=_(null),W=_(null),X={conservative:L(21,100,8e4),moderate:L(14,100,8e4),aggressive:L(10,100,8e4),custom:{}},z=async()=>{j.value=!0,b.value=null;try{ce.value=await pe(),w.value=[]}catch(o){b.value=o.message||"Failed to load warm-up schedules"}finally{j.value=!1}},Y=async o=>{try{const e=await de(o);if(e){const c=w.value.findIndex(y=>y.domain===o);c>-1?w.value[c]=e:w.value.push(e)}}catch(e){console.error(`Failed to load schedule for ${o}:`,e)}},ve=()=>{k.value=!1,d.value={domain:A.value[0]||"",template_type:"moderate",start_date:new Date().toISOString().split("T")[0],daily_volumes:{...X.moderate}},D.value=!0},_e=o=>{k.value=!0,d.value={domain:o.domain,template_type:o.template_type,start_date:o.start_date.split("T")[0],daily_volumes:{...o.daily_volumes}},D.value=!0},fe=o=>{o==="custom"?d.value.daily_volumes={}:d.value.daily_volumes={...X[o]}},ye=async()=>{x.value=!0,b.value=null;try{k.value&&d.value.id?await ie(d.value.id,d.value):await re(d.value),D.value=!1,await z();for(const o of A.value)await Y(o)}catch(o){b.value=o.message||"Failed to save warm-up schedule"}finally{x.value=!1}},ge=o=>{p.value=o,M.value=!0},xe=o=>{W.value=o,T.value=!0},be=async()=>{if(W.value){x.value=!0,b.value=null;try{await me(W.value),T.value=!1,await z()}catch(o){b.value=o.message||"Failed to delete warm-up schedule"}finally{x.value=!1}}},Ce=()=>{const o=Object.keys(d.value.daily_volumes).length+1;d.value.daily_volumes[o]=100},L=(o,e,c)=>{const y={},B=Math.pow(c/e,1/(o-1));for(let S=1;S<=o;S++)y[S]=Math.floor(e*Math.pow(B,S-1));return y},we=o=>new Date(o).toLocaleDateString(),Z=o=>o.charAt(0).toUpperCase()+o.slice(1),Ue=o=>{switch(o){case"aggressive":return"destructive";case"conservative":return"default";default:return"secondary"}};return $e(async()=>{await z();for(const o of A.value)await Y(o)}),(o,e)=>{const c=Pe,y=m("UTableHead"),B=m("UTableRow"),S=m("UTableHeader"),U=m("UTableCell"),V=he,De=Ae,ke=m("UTableBody"),Se=Fe,I=m("UCardContent"),N=je,$=m("UIDialogTitle"),R=m("UIDialogDescription"),q=m("UIDialogHeader"),ee=m("USelectValue"),te=m("USelectTrigger"),P=m("USelectItem"),le=m("USelectContent"),ae=Me,se=Be,oe=m("USeparator"),G=m("UIDialogFooter"),J=m("UIDialogContent"),K=m("UIDialog"),E=m("UCardTitle"),H=m("UCardHeader"),Te=m("UAlertTitle"),Ve=m("UAlertDescription"),Ie=Ee;return u(),v("div",Ke,[s("div",Qe,[e[10]||(e[10]=s("div",null,[s("h1",{class:"text-2xl font-bold"},"Warm-up Scheduler"),s("p",{class:"text-sm text-gray-500 mt-1"}," Create custom warm-up schedules for new domains and IPs ")],-1)),t(c,{onClick:ve,disabled:j.value},{default:l(()=>[t(f(ne),{class:"h-4 w-4 mr-2"}),e[9]||(e[9]=n(" Create Schedule ",-1))]),_:1},8,["disabled"])]),t(N,null,{default:l(()=>[t(I,{class:"pt-6"},{default:l(()=>[j.value&&w.value.length===0?(u(),v("div",Xe,[t(f(Q),{class:"h-8 w-8 animate-spin text-gray-400"})])):w.value.length===0?(u(),v("div",Ye,[t(f(Oe),{class:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e[11]||(e[11]=s("p",{class:"text-gray-500"},"No warm-up schedules configured",-1)),e[12]||(e[12]=s("p",{class:"text-sm text-gray-400 mt-1"}," Create a schedule to gradually increase sending volume for new domains ",-1))])):(u(),g(Se,{key:2},{default:l(()=>[t(S,null,{default:l(()=>[t(B,null,{default:l(()=>[t(y,null,{default:l(()=>[...e[13]||(e[13]=[n("Domain",-1)])]),_:1}),t(y,null,{default:l(()=>[...e[14]||(e[14]=[n("Template",-1)])]),_:1}),t(y,null,{default:l(()=>[...e[15]||(e[15]=[n("Start Date",-1)])]),_:1}),t(y,null,{default:l(()=>[...e[16]||(e[16]=[n("Current Day",-1)])]),_:1}),t(y,null,{default:l(()=>[...e[17]||(e[17]=[n("Progress",-1)])]),_:1}),t(y,null,{default:l(()=>[...e[18]||(e[18]=[n("Status",-1)])]),_:1}),t(y,{class:"text-right"},{default:l(()=>[...e[19]||(e[19]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(ke,null,{default:l(()=>[(u(!0),v(h,null,F(w.value,a=>(u(),g(B,{key:a.id},{default:l(()=>[t(U,{class:"font-medium"},{default:l(()=>[n(r(a.domain),1)]),_:2},1024),t(U,null,{default:l(()=>[t(V,{variant:Ue(a.template_type)},{default:l(()=>[n(r(Z(a.template_type)),1)]),_:2},1032,["variant"])]),_:2},1024),t(U,null,{default:l(()=>[n(r(we(a.start_date)),1)]),_:2},1024),t(U,null,{default:l(()=>[n(" Day "+r(a.current_day)+" of "+r(Object.keys(a.daily_volumes).length),1)]),_:2},1024),t(U,{class:"w-48"},{default:l(()=>[s("div",Ze,[t(De,{value:a.progress_percentage},null,8,["value"]),s("div",et,[s("span",null,r(a.progress_percentage.toFixed(0))+"%",1),a.completed?(u(),v("span",tt,"Complete")):C("",!0)])])]),_:2},1024),t(U,null,{default:l(()=>[t(V,{variant:a.completed?"default":"secondary"},{default:l(()=>[n(r(a.completed?"Completed":"In Progress"),1)]),_:2},1032,["variant"])]),_:2},1024),t(U,{class:"text-right"},{default:l(()=>[s("div",lt,[t(c,{variant:"ghost",size:"sm",onClick:i=>ge(a),title:"View details"},{default:l(()=>[t(f(Ge),{class:"h-4 w-4"})]),_:1},8,["onClick"]),t(c,{variant:"ghost",size:"sm",onClick:i=>_e(a),title:"Edit schedule",disabled:a.completed},{default:l(()=>[t(f(We),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t(c,{variant:"ghost",size:"sm",onClick:i=>xe(a.id),title:"Delete schedule"},{default:l(()=>[t(f(Je),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1}),t(K,{open:D.value,"onUpdate:open":e[4]||(e[4]=a=>D.value=a)},{default:l(()=>[t(J,{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(q,null,{default:l(()=>[t($,null,{default:l(()=>[n(r(k.value?"Edit":"Create")+" Warm-up Schedule",1)]),_:1}),t(R,null,{default:l(()=>[...e[20]||(e[20]=[n(" Configure day-by-day volume limits for domain warm-up. ",-1)])]),_:1})]),_:1}),s("div",at,[s("div",st,[e[21]||(e[21]=s("label",{class:"text-sm font-medium"},"Domain",-1)),t(ae,{modelValue:d.value.domain,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.domain=a),disabled:k.value},{default:l(()=>[t(te,null,{default:l(()=>[t(ee,{placeholder:"Select a domain"})]),_:1}),t(le,null,{default:l(()=>[(u(!0),v(h,null,F(A.value,a=>(u(),g(P,{key:a,value:a},{default:l(()=>[n(r(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"])]),s("div",ot,[e[26]||(e[26]=s("label",{class:"text-sm font-medium"},"Template",-1)),t(ae,{modelValue:d.value.template_type,"onUpdate:modelValue":[e[1]||(e[1]=a=>d.value.template_type=a),fe]},{default:l(()=>[t(te,null,{default:l(()=>[t(ee,{placeholder:"Select a template"})]),_:1}),t(le,null,{default:l(()=>[t(P,{value:"conservative"},{default:l(()=>[...e[22]||(e[22]=[n(" Conservative - 21 days, 100 → 80,000 ",-1)])]),_:1}),t(P,{value:"moderate"},{default:l(()=>[...e[23]||(e[23]=[n(" Moderate - 14 days, 100 → 80,000 ",-1)])]),_:1}),t(P,{value:"aggressive"},{default:l(()=>[...e[24]||(e[24]=[n(" Aggressive - 10 days, 100 → 80,000 ",-1)])]),_:1}),t(P,{value:"custom"},{default:l(()=>[...e[25]||(e[25]=[n(" Custom - Define your own schedule ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e[27]||(e[27]=s("p",{class:"text-xs text-gray-500"}," Choose a template to auto-populate day-by-day volumes ",-1))]),s("div",nt,[e[28]||(e[28]=s("label",{class:"text-sm font-medium"},"Start Date",-1)),t(se,{modelValue:d.value.start_date,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.start_date=a),type:"date"},null,8,["modelValue"])]),d.value.template_type==="custom"?(u(),v("div",ut,[t(oe),s("div",dt,[e[29]||(e[29]=s("label",{class:"text-sm font-medium"},"Custom Daily Volumes",-1)),e[30]||(e[30]=s("p",{class:"text-xs text-gray-500 mb-2"}," Set maximum email volume for each day of warm-up ",-1)),s("div",rt,[(u(!0),v(h,null,F(d.value.daily_volumes,(a,i)=>(u(),v("div",{key:i,class:"space-y-1"},[s("label",it,"Day "+r(i),1),t(se,{modelValue:d.value.daily_volumes[i],"onUpdate:modelValue":Ne=>d.value.daily_volumes[i]=Ne,modelModifiers:{number:!0},type:"number",min:"1",class:"h-16"},null,8,["modelValue","onUpdate:modelValue"])]))),128)),s("div",mt,[t(c,{variant:"outline",size:"sm",onClick:Ce,disabled:Object.keys(d.value.daily_volumes).length>=30},{default:l(()=>[t(f(ne),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])])])):C("",!0),d.value.template_type!=="custom"?(u(),v("div",pt,[t(oe),s("div",null,[e[31]||(e[31]=s("label",{class:"text-sm font-medium"},"Schedule Preview",-1)),s("div",ct,[(u(!0),v(h,null,F(d.value.daily_volumes,(a,i)=>(u(),v("div",{key:i,class:"text-xs space-y-1 p-2 bg-gray-50 rounded"},[s("div",vt,"Day "+r(i),1),s("div",null,r(a?.toLocaleString()||0),1)]))),128))])])])):C("",!0)]),t(G,null,{default:l(()=>[t(c,{variant:"outline",onClick:e[3]||(e[3]=a=>D.value=!1)},{default:l(()=>[...e[32]||(e[32]=[n(" Cancel ",-1)])]),_:1}),t(c,{onClick:ye,disabled:x.value},{default:l(()=>[x.value?(u(),g(f(Q),{key:0,class:"h-4 w-4 animate-spin mr-2"})):C("",!0),n(" "+r(k.value?"Save Changes":"Create Schedule"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),t(K,{open:M.value,"onUpdate:open":e[6]||(e[6]=a=>M.value=a)},{default:l(()=>[t(J,{class:"sm:max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(q,null,{default:l(()=>[t($,null,{default:l(()=>[...e[33]||(e[33]=[n("Warm-up Schedule Details",-1)])]),_:1}),t(R,null,{default:l(()=>[n(" View detailed day-by-day progress for "+r(p.value?.domain),1)]),_:1})]),_:1}),p.value?(u(),v("div",_t,[s("div",ft,[t(N,null,{default:l(()=>[t(H,{class:"pb-2"},{default:l(()=>[t(E,{class:"text-sm font-medium"},{default:l(()=>[...e[34]||(e[34]=[n("Domain",-1)])]),_:1})]),_:1}),t(I,null,{default:l(()=>[s("div",yt,r(p.value.domain),1)]),_:1})]),_:1}),t(N,null,{default:l(()=>[t(H,{class:"pb-2"},{default:l(()=>[t(E,{class:"text-sm font-medium"},{default:l(()=>[...e[35]||(e[35]=[n("Template",-1)])]),_:1})]),_:1}),t(I,null,{default:l(()=>[t(V,null,{default:l(()=>[n(r(Z(p.value.template_type)),1)]),_:1})]),_:1})]),_:1}),t(N,null,{default:l(()=>[t(H,{class:"pb-2"},{default:l(()=>[t(E,{class:"text-sm font-medium"},{default:l(()=>[...e[36]||(e[36]=[n("Current Day",-1)])]),_:1})]),_:1}),t(I,null,{default:l(()=>[s("div",gt,r(p.value.current_day)+" / "+r(Object.keys(p.value.daily_volumes).length),1)]),_:1})]),_:1}),t(N,null,{default:l(()=>[t(H,{class:"pb-2"},{default:l(()=>[t(E,{class:"text-sm font-medium"},{default:l(()=>[...e[37]||(e[37]=[n("Progress",-1)])]),_:1})]),_:1}),t(I,null,{default:l(()=>[s("div",xt,r(p.value.progress_percentage.toFixed(0))+"% ",1),p.value.completed?(u(),g(V,{key:0,class:"mt-1"},{default:l(()=>[...e[38]||(e[38]=[n(" Completed ",-1)])]),_:1})):C("",!0)]),_:1})]),_:1})]),s("div",null,[e[39]||(e[39]=s("h4",{class:"font-semibold mb-3"},"Daily Progress",-1)),s("div",bt,[(u(!0),v(h,null,F(p.value.daily_volumes,(a,i)=>(u(),v("div",{key:i,class:Re(["flex items-center gap-3 p-3 rounded",Number(i)<p.value.current_day?"bg-green-50 border-green-200":Number(i)===p.value.current_day?"bg-blue-50 border-blue-200":"bg-gray-50"])},[t(V,{variant:Number(i)<p.value.current_day?"default":Number(i)===p.value.current_day?"secondary":"outline",class:"min-w-20"},{default:l(()=>[n(r(Number(i)<p.value.current_day?"Complete":Number(i)===p.value.current_day?"Current":"Pending"),1)]),_:2},1032,["variant"]),s("div",Ct,[s("div",wt,"Day "+r(i),1),s("div",Ut,r(a?.toLocaleString()||0)+" emails ",1)]),Number(i)<p.value.current_day?(u(),g(f(qe),{key:0,class:"h-5 w-5 text-green-600"})):Number(i)===p.value.current_day?(u(),g(f(ue),{key:1,class:"h-5 w-5 text-blue-600 animate-pulse"})):(u(),g(f(ue),{key:2,class:"h-5 w-5 text-gray-400"}))],2))),128))])])])):C("",!0),t(G,null,{default:l(()=>[t(c,{onClick:e[5]||(e[5]=a=>M.value=!1)},{default:l(()=>[...e[40]||(e[40]=[n("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(K,{open:T.value,"onUpdate:open":e[8]||(e[8]=a=>T.value=a)},{default:l(()=>[t(J,{class:"sm:max-w-md"},{default:l(()=>[t(q,null,{default:l(()=>[t($,null,{default:l(()=>[...e[41]||(e[41]=[n("Delete Warm-up Schedule",-1)])]),_:1}),t(R,null,{default:l(()=>[...e[42]||(e[42]=[n(" Are you sure you want to delete this warm-up schedule? This action cannot be undone. ",-1)])]),_:1})]),_:1}),t(G,null,{default:l(()=>[t(c,{variant:"outline",onClick:e[7]||(e[7]=a=>T.value=!1)},{default:l(()=>[...e[43]||(e[43]=[n(" Cancel ",-1)])]),_:1}),t(c,{variant:"destructive",onClick:be,disabled:x.value},{default:l(()=>[x.value?(u(),g(f(Q),{key:0,class:"h-4 w-4 animate-spin mr-2"})):C("",!0),e[44]||(e[44]=n(" Delete ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),b.value?(u(),g(Ie,{key:0,variant:"destructive"},{default:l(()=>[t(f(ze),{class:"h-4 w-4"}),t(Te,null,{default:l(()=>[...e[45]||(e[45]=[n("Error",-1)])]),_:1}),t(Ve,null,{default:l(()=>[n(r(b.value),1)]),_:1})]),_:1})):C("",!0)])}}});export{Rt as default};
