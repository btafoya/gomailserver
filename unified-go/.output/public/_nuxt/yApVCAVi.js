import{_ as T}from"./TWhVIJrq.js";import{u as S}from"./DEEVIwE6.js";import{u as j}from"./vkYvzIJb.js";import{q as g,y as D,c as i,a as t,b as h,w as A,t as m,F as B,G as F,o as l,d as b,C as N,n as L,J as k}from"./BUcYa01A.js";import{P}from"./CSm6nba8.js";import"./DAzf46mh.js";import"./CYi_maFl.js";import"./BDTT5SEM.js";const G=()=>typeof window<"u"?localStorage.getItem("token"):null,f=()=>{const n=G();return{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}}},J=()=>{const n=j();return{getAliases:async()=>{const o=await fetch(`${n}/aliases`,{method:"GET",headers:f()});if(!o.ok)throw new Error("Failed to fetch aliases");return(await o.json()).data||[]},getAlias:async o=>{const e=await fetch(`${n}/aliases/${o}`,{method:"GET",headers:f()});if(!e.ok)throw new Error("Failed to fetch alias");return(await e.json()).data},createAlias:async o=>{const e=await fetch(`${n}/aliases`,{method:"POST",headers:f(),body:JSON.stringify(o)});if(!e.ok){const p=await e.json();throw new Error(p.message||"Failed to create alias")}return(await e.json()).data},updateAlias:async(o,e)=>{const d=await fetch(`${n}/aliases/${o}`,{method:"PUT",headers:f(),body:JSON.stringify(e)});if(!d.ok){const x=await d.json();throw new Error(x.message||"Failed to update alias")}return(await d.json()).data},deleteAlias:async o=>{if(!(await fetch(`${n}/aliases/${o}`,{method:"DELETE",headers:f()})).ok)throw new Error("Failed to delete alias")}}},O={class:"border-b"},V={class:"flex h-16 items-center px-4"},z={class:"ml-auto"},I={class:"flex-1 p-4 md:p-8"},U={class:"flex items-center justify-between mb-6"},q={key:0,class:"text-center py-12"},H={key:1,class:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg"},M={key:2,class:"text-center py-12 bg-card rounded-lg border border-border"},K={key:3,class:"bg-card rounded-lg border border-border overflow-hidden"},Q={class:"w-full"},R={class:"px-6 py-4 text-sm text-foreground"},W={class:"px-6 py-4 text-sm text-muted-foreground"},X={class:"px-6 py-4 text-sm text-muted-foreground"},Y={class:"px-6 py-4 text-sm text-muted-foreground"},Z={class:"px-6 py-4 text-sm"},tt={class:"px-6 py-4 text-sm"},et=["onClick"],st=["onClick"],ut={__name:"index",setup(n){const y=S(),{getAliases:_,deleteAlias:v}=J(),w=()=>{y.logout()},c=g([]),o=g(!1),e=g(null),d=async()=>{o.value=!0,e.value=null;try{c.value=await _()}catch(r){e.value=r.message}finally{o.value=!1}},p=async(r,s)=>{if(confirm(`Are you sure you want to delete alias "${s}"? This action cannot be undone.`))try{await v(r),c.value=c.value.filter(u=>u.id!==r)}catch(u){e.value=u.message}},x=()=>{k("/admin/aliases/create")},E=r=>{k(`/admin/aliases/${r}`)},C=r=>{switch(r){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return D(()=>{d()}),(r,s)=>{const u=T;return l(),i("div",null,[t("div",O,[t("div",V,[s[1]||(s[1]=t("h1",{class:"text-lg font-semibold"},"Admin Console",-1)),t("div",z,[h(u,{variant:"outline",onClick:w},{default:A(()=>[...s[0]||(s[0]=[b(" Logout ",-1)])]),_:1})])])]),t("div",I,[t("div",U,[s[3]||(s[3]=t("h2",{class:"text-3xl font-bold tracking-tight"},"Aliases",-1)),h(u,{onClick:x},{default:A(()=>[h(N(P),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=b(" Add Alias ",-1))]),_:1})]),o.value?(l(),i("div",q,[...s[4]||(s[4]=[t("p",{class:"text-muted-foreground"},"Loading aliases...",-1)])])):e.value?(l(),i("div",H," Error loading aliases: "+m(e.value),1)):c.value.length===0?(l(),i("div",M,[...s[5]||(s[5]=[t("p",{class:"text-muted-foreground"},"No aliases found. Add your first alias to get started.",-1)])])):(l(),i("div",K,[t("table",Q,[s[6]||(s[6]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Alias Address"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Destinations"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Domain"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Created"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Status"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Actions")])],-1)),t("tbody",null,[(l(!0),i(B,null,F(c.value,a=>(l(),i("tr",{key:a.id,class:"border-t border-border"},[t("td",R,m(a.address),1),t("td",W,m(a.destinations.join(", ")),1),t("td",X,m(a.domain_name||a.domain_id),1),t("td",Y,m(new Date(a.created_at).toLocaleDateString()),1),t("td",Z,[t("span",{class:L(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",C(a.status)])},m(a.status),3)]),t("td",tt,[t("button",{onClick:$=>E(a.id),class:"text-primary hover:underline mr-2"}," Edit ",8,et),t("button",{onClick:$=>p(a.id,a.address),class:"text-red-600 hover:underline"}," Delete ",8,st)])]))),128))])])]))])])}}};export{ut as default};
