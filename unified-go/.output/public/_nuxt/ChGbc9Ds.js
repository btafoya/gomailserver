import{i as b}from"./ZLFFUBy4.js";import{$ as w,a0 as J,q as O,S as N,p as C,a1 as F}from"./BUcYa01A.js";function M(n){return JSON.parse(JSON.stringify(n))}const c=new Map;function B(n){const o=w();function f(t){var e;const s=c.get(n)||new Set;s.add(t),c.set(n,s);const l=()=>r(t);return(e=o?.cleanups)==null||e.push(l),l}function g(t){function e(...s){r(e),t(...s)}return f(e)}function r(t){const e=c.get(n);e&&(e.delete(t),e.size||a())}function a(){c.delete(n)}function d(t,e){var s;(s=c.get(n))==null||s.forEach(l=>l(t,e))}return{on:f,once:g,off:r,emit:d,reset:a}}function D(n,o,f,g={}){var r,a,d;const{clone:t=!1,passive:e=!1,eventName:s,deep:l=!1,defaultValue:$,shouldEmit:S}=g,u=J(),x=f||u?.emit||((r=u?.$emit)==null?void 0:r.bind(u))||((d=(a=u?.proxy)==null?void 0:a.$emit)==null?void 0:d.bind(u?.proxy));let m=s;o||(o="modelValue"),m=m||`update:${o.toString()}`;const V=i=>t?typeof t=="function"?t(i):M(i):i,h=()=>b(n[o])?V(n[o]):$,E=i=>{S?S(i)&&x(m,i):x(m,i)};if(e){const i=h(),_=O(i);let v=!1;return N(()=>n[o],p=>{v||(v=!0,_.value=V(p),F(()=>v=!1))}),N(_,p=>{!v&&(p!==n[o]||l)&&E(p)},{deep:l}),_}else return C({get(){return h()},set(i){E(i)}})}export{D as a,B as u};
