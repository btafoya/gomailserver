import{_ as ft}from"./TWhVIJrq.js";import{_ as ct}from"./DQxZl4Gi.js";import{_ as pt}from"./DDnXcZAG.js";import{_ as vt}from"./BaZuvFz9.js";import{_ as xt}from"./BAwcxMjs.js";import{useReputationPhase5Api as _t}from"./DUWfgsoE.js";import{R as N}from"./D0UlAAtA.js";import{M as j}from"./B3e0D3rj.js";import{L as P}from"./BZDPJRid.js";import{T as yt}from"./B0qfsVkZ.js";import{C as q}from"./98tBQm4Q.js";import{c as gt}from"./BDTT5SEM.js";import{I as St}from"./CuaCQJ6X.js";import{f as bt,q as f,c as v,a as s,b as e,w as l,D as g,o,E as S,d as a,C as i,F as O,G as W,t as n,g as Y,n as H}from"./BUcYa01A.js";import"./DAzf46mh.js";import"./CYi_maFl.js";import"./ZLFFUBy4.js";import"./vkYvzIJb.js";const K=gt("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),wt={class:"space-y-6"},kt={class:"flex items-center justify-between"},Ct={class:"flex items-end gap-4"},Dt={class:"flex-1 space-y-2"},Ut={class:"flex items-center justify-between"},Tt={class:"flex items-center gap-2"},Et={key:0,class:"text-center py-12 text-gray-500"},Nt={key:1,class:"flex items-center justify-center py-12"},Pt={key:2,class:"space-y-6"},Rt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Lt={class:"text-2xl font-bold"},Mt={class:"text-2xl font-bold"},Ft={class:"text-2xl font-bold"},It={class:"text-2xl font-bold"},Gt={key:0},Vt={class:"h-64"},Bt={class:"text-sm text-gray-500"},jt={class:"text-xs text-gray-400 mt-2"},zt={class:"text-sm text-gray-500"},At={key:4,class:"text-center py-12 text-gray-500"},qt={class:"flex items-center justify-between"},Ot={class:"flex items-center gap-2"},Wt={key:0,class:"text-center py-12 text-gray-500"},Yt={key:1,class:"space-y-4"},Ht={class:"text-sm text-gray-600"},Kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},$t={class:"text-lg font-mono font-bold"},ht={key:2,class:"flex items-center justify-center py-12"},Xt={key:3,class:"space-y-6"},Jt={class:"flex items-center justify-between"},Qt={class:"flex items-center gap-2"},Zt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},te={class:"text-2xl font-bold"},ee={class:"text-2xl font-bold"},le={class:"space-y-2"},se={class:"text-sm text-gray-500"},Ce=bt({__name:"index",setup(ae){const{getPostmasterMetrics:$,getSNDSMetrics:h,getExternalMetricsTrends:X}=_t(),J=f(["example.com","mail.example.com"]),r=f(""),b=f(""),Q=f(["192.0.2.1","192.0.2.2"]),w=f(!1),R=f(!1),L=f(!1),D=f(!1),U=f(!1),x=f(null),T=f(null),_=f(null),E=f(null),M=f(null),F=async()=>{r.value&&(w.value=!0,await Promise.all([z()]),w.value=!1)},z=async()=>{if(r.value){R.value=!0,T.value=null;try{x.value=await $(r.value)}catch(m){T.value=m.message||"Failed to load Gmail Postmaster metrics",x.value=null}finally{R.value=!1}}},I=async m=>{L.value=!0,E.value=null;try{_.value=await h(m)}catch(t){E.value=t.message||"Failed to load SNDS metrics",_.value=null}finally{L.value=!1}},Z=async()=>{if(r.value)try{M.value=await X(r.value,7)}catch(m){console.error("Failed to load trends data:",m)}},tt=async()=>{r.value&&(D.value=!0,await z(),await Z(),D.value=!1)},et=async()=>{b.value&&(U.value=!0,await I(b.value),U.value=!1)},lt=async()=>{r.value&&await F(),b.value&&await I(b.value)},A=m=>new Date(m).toLocaleString(),st=m=>{const t=m.toLowerCase();return t==="high"||t==="good"?"text-green-600":t==="medium"||t==="medium_low"?"text-yellow-600":t==="low"||t==="bad"?"text-red-600":"text-gray-600"},at=m=>{switch(m){case"GREEN":return"text-green-600";case"YELLOW":return"text-yellow-600";case"RED":return"text-red-600";default:return"text-gray-600"}},ot=m=>{switch(m){case"GREEN":return"default";case"YELLOW":return"secondary";case"RED":return"destructive";default:return"outline"}};return(m,t)=>{const k=ft,nt=g("USelectValue"),it=g("USelectTrigger"),rt=g("USelectItem"),ut=g("USelectContent"),dt=ct,u=g("UCardContent"),d=pt,c=g("UCardTitle"),p=g("UCardHeader"),G=g("UAlertTitle"),V=g("UAlertDescription"),B=vt,C=xt,mt=g("USeparator");return o(),v("div",wt,[s("div",kt,[t[3]||(t[3]=s("div",null,[s("h1",{class:"text-2xl font-bold"},"External Metrics"),s("p",{class:"text-sm text-gray-500 mt-1"}," Monitor reputation metrics from Gmail Postmaster Tools and Microsoft SNDS ")],-1)),e(k,{variant:"outline",size:"sm",onClick:lt,disabled:w.value},{default:l(()=>[w.value?(o(),S(i(N),{key:0,class:"h-4 w-4 animate-spin mr-2"})):(o(),S(i(N),{key:1,class:"h-4 w-4 mr-2"})),t[2]||(t[2]=a(" Refresh ",-1))]),_:1},8,["disabled"])]),e(d,null,{default:l(()=>[e(u,{class:"pt-6"},{default:l(()=>[s("div",Ct,[s("div",Dt,[t[4]||(t[4]=s("label",{class:"text-sm font-medium"},"Select Domain",-1)),e(dt,{modelValue:r.value,"onUpdate:modelValue":[t[0]||(t[0]=y=>r.value=y),F]},{default:l(()=>[e(it,null,{default:l(()=>[e(nt,{placeholder:"Choose a domain to view metrics"})]),_:1}),e(ut,null,{default:l(()=>[(o(!0),v(O,null,W(J.value,y=>(o(),S(rt,{key:y,value:y},{default:l(()=>[a(n(y),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),e(k,{onClick:F,disabled:!r.value||w.value},{default:l(()=>[...t[5]||(t[5]=[a(" Load Metrics ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,null,{default:l(()=>[s("div",Ut,[s("div",Tt,[e(i(j),{class:"h-5 w-5"}),e(c,null,{default:l(()=>[...t[6]||(t[6]=[a("Gmail Postmaster Tools",-1)])]),_:1})]),e(k,{variant:"outline",size:"sm",onClick:tt,disabled:!r.value||D.value},{default:l(()=>[D.value?(o(),S(i(P),{key:0,class:"h-4 w-4 animate-spin mr-2"})):(o(),S(i(N),{key:1,class:"h-4 w-4 mr-2"})),t[7]||(t[7]=a(" Sync ",-1))]),_:1},8,["disabled"])])]),_:1}),e(u,null,{default:l(()=>[r.value?R.value?(o(),v("div",Nt,[e(i(P),{class:"h-8 w-8 animate-spin text-gray-400"})])):x.value?(o(),v("div",Pt,[s("div",Rt,[e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[9]||(t[9]=[a("Reputation",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",{class:H(["text-2xl font-bold",st(x.value.reputation)])},n(x.value.reputation),3),t[10]||(t[10]=s("p",{class:"text-xs text-gray-500 mt-1"},"Gmail rating",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[11]||(t[11]=[a("Spam Rate",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",Lt,n((x.value.spam_rate*100).toFixed(2))+"% ",1),t[12]||(t[12]=s("p",{class:"text-xs text-gray-500 mt-1"},"Email marked as spam",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[13]||(t[13]=[a("SPF Rate",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",Mt,n((x.value.spf_rate*100).toFixed(1))+"% ",1),t[14]||(t[14]=s("p",{class:"text-xs text-gray-500 mt-1"},"SPF pass rate",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[15]||(t[15]=[a("DKIM Rate",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",Ft,n((x.value.dkim_rate*100).toFixed(1))+"% ",1),t[16]||(t[16]=s("p",{class:"text-xs text-gray-500 mt-1"},"DKIM pass rate",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[17]||(t[17]=[a("Encryption",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",It,n((x.value.encryption_rate*100).toFixed(1))+"% ",1),t[18]||(t[18]=s("p",{class:"text-xs text-gray-500 mt-1"},"TLS encrypted",-1))]),_:1})]),_:1})]),M.value?(o(),v("div",Gt,[t[20]||(t[20]=s("h3",{class:"text-lg font-semibold mb-4"},"7-Day Reputation Trend",-1)),s("div",Vt,[e(d,{class:"h-full"},{default:l(()=>[e(u,{class:"pt-6 h-full flex items-center justify-center"},{default:l(()=>[s("p",Bt,[e(i(yt),{class:"h-4 w-4 inline mr-2"}),t[19]||(t[19]=a(" Trend chart visualization requires chart library ",-1))]),s("p",jt," Trend data: "+n(M.value.dates.length)+" days available ",1)]),_:1})]),_:1})])])):Y("",!0),s("div",zt,[s("p",null,[t[21]||(t[21]=a(" Based on ",-1)),s("strong",null,n(x.value.sample_count),1),a(" emails (last updated: "+n(A(x.value.fetched_at))+") ",1)])])])):T.value?(o(),S(B,{key:3,variant:"destructive"},{default:l(()=>[e(i(q),{class:"h-4 w-4"}),e(G,null,{default:l(()=>[...t[22]||(t[22]=[a("Error",-1)])]),_:1}),e(V,null,{default:l(()=>[a(n(T.value),1)]),_:1})]),_:1})):(o(),v("div",At,[e(i(j),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),t[23]||(t[23]=s("p",null,"No Gmail Postmaster metrics available",-1)),t[24]||(t[24]=s("p",{class:"text-sm text-gray-400 mt-1"}," Configure Gmail Postmaster Tools integration for this domain ",-1))])):(o(),v("div",Et,[e(i(j),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),t[8]||(t[8]=s("p",null,"Select a domain to view Gmail Postmaster metrics",-1))]))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,null,{default:l(()=>[s("div",qt,[s("div",Ot,[e(i(K),{class:"h-5 w-5"}),e(c,null,{default:l(()=>[...t[25]||(t[25]=[a("Microsoft SNDS",-1)])]),_:1})]),e(k,{variant:"outline",size:"sm",onClick:et,disabled:!r.value||U.value},{default:l(()=>[U.value?(o(),S(i(P),{key:0,class:"h-4 w-4 animate-spin mr-2"})):(o(),S(i(N),{key:1,class:"h-4 w-4 mr-2"})),t[26]||(t[26]=a(" Sync ",-1))]),_:1},8,["disabled"])])]),_:1}),e(u,null,{default:l(()=>[r.value?b.value?L.value?(o(),v("div",ht,[e(i(P),{class:"h-8 w-8 animate-spin text-gray-400"})])):_.value?(o(),v("div",Xt,[s("div",Jt,[s("div",Qt,[e(C,{variant:"outline",class:"text-sm font-mono"},{default:l(()=>[a(n(b.value),1)]),_:1})]),e(k,{variant:"ghost",size:"sm",onClick:t[1]||(t[1]=y=>b.value=null)},{default:l(()=>[...t[30]||(t[30]=[a(" Change IP ",-1)])]),_:1})]),s("div",Zt,[e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[31]||(t[31]=[a("Reputation",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",{class:H(["text-2xl font-bold",at(_.value.filter_level)])},n(_.value.reputation_score),3),t[32]||(t[32]=s("p",{class:"text-xs text-gray-500 mt-1"},"Out of 10",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[33]||(t[33]=[a("Spam Traps",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",te,n(_.value.spam_trap_hits),1),t[34]||(t[34]=s("p",{class:"text-xs text-gray-500 mt-1"},"Trap hits detected",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[35]||(t[35]=[a("Complaint Rate",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[s("div",ee,n((_.value.complaint_rate*100).toFixed(2))+"% ",1),t[36]||(t[36]=s("p",{class:"text-xs text-gray-500 mt-1"},"User complaints",-1))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,{class:"pb-2"},{default:l(()=>[e(c,{class:"text-sm font-medium"},{default:l(()=>[...t[37]||(t[37]=[a("Filter Level",-1)])]),_:1})]),_:1}),e(u,null,{default:l(()=>[e(C,{variant:ot(_.value.filter_level),class:"text-lg"},{default:l(()=>[a(n(_.value.filter_level),1)]),_:1},8,["variant"]),t[38]||(t[38]=s("p",{class:"text-xs text-gray-500 mt-1"},"Microsoft filter",-1))]),_:1})]),_:1})]),e(B,null,{default:l(()=>[e(i(St),{class:"h-4 w-4"}),e(G,null,{default:l(()=>[...t[39]||(t[39]=[a("Filter Level",-1)])]),_:1}),e(V,null,{default:l(()=>[s("div",le,[s("p",null,[e(C,null,{default:l(()=>[...t[40]||(t[40]=[a("GREEN",-1)])]),_:1}),t[41]||(t[41]=a(" - Good reputation, minimal filtering",-1))]),s("p",null,[e(C,{variant:"secondary"},{default:l(()=>[...t[42]||(t[42]=[a("YELLOW",-1)])]),_:1}),t[43]||(t[43]=a(" - Moderate reputation, some filtering applied",-1))]),s("p",null,[e(C,{variant:"destructive"},{default:l(()=>[...t[44]||(t[44]=[a("RED",-1)])]),_:1}),t[45]||(t[45]=a(" - Poor reputation, heavy filtering applied",-1))])])]),_:1})]),_:1}),s("div",se,[s("p",null,[t[46]||(t[46]=a(" Based on ",-1)),s("strong",null,n(_.value.sample_count),1),a(" emails (last updated: "+n(A(_.value.fetched_at))+") ",1)])])])):E.value?(o(),S(B,{key:4,variant:"destructive"},{default:l(()=>[e(i(q),{class:"h-4 w-4"}),e(G,null,{default:l(()=>[...t[47]||(t[47]=[a("Error",-1)])]),_:1}),e(V,null,{default:l(()=>[a(n(E.value),1)]),_:1})]),_:1})):Y("",!0):(o(),v("div",Yt,[s("p",Ht,[t[28]||(t[28]=a(" Select an IP address to view SNDS metrics for ",-1)),s("strong",null,n(r.value),1)]),s("div",Kt,[(o(!0),v(O,null,W(Q.value,y=>(o(),S(d,{key:y,class:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:oe=>{b.value=y,I(y)}},{default:l(()=>[e(u,{class:"pt-6"},{default:l(()=>[s("div",$t,n(y),1),t[29]||(t[29]=s("p",{class:"text-xs text-gray-500 mt-1"},"Click to view metrics",-1))]),_:2},1024)]),_:2},1032,["onClick"]))),128))])])):(o(),v("div",Wt,[e(i(K),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),t[27]||(t[27]=s("p",null,"Select a domain to view SNDS metrics",-1))]))]),_:1})]),_:1}),e(d,null,{default:l(()=>[e(p,null,{default:l(()=>[e(c,{class:"text-lg"},{default:l(()=>[...t[48]||(t[48]=[a("Setup Instructions",-1)])]),_:1})]),_:1}),e(u,{class:"space-y-4"},{default:l(()=>[t[49]||(t[49]=s("div",null,[s("h4",{class:"font-semibold mb-2"},"Gmail Postmaster Tools"),s("ol",{class:"list-decimal list-inside space-y-1 text-sm text-gray-600"},[s("li",null,[a("Visit "),s("a",{href:"https://postmaster.google.com",target:"_blank",class:"text-blue-600 hover:underline"},"postmaster.google.com")]),s("li",null,"Verify your domain ownership using TXT records"),s("li",null,"Configure reputation data sharing"),s("li",null,"Data will be automatically synced to this interface")])],-1)),e(mt),t[50]||(t[50]=s("div",null,[s("h4",{class:"font-semibold mb-2"},"Microsoft SNDS"),s("ol",{class:"list-decimal list-inside space-y-1 text-sm text-gray-600"},[s("li",null,[a("Visit "),s("a",{href:"https://sendersupport.olc.protection.outlook.com/snds/",target:"_blank",class:"text-blue-600 hover:underline"},"SNDS Registration")]),s("li",null,"Register your IP addresses"),s("li",null,"Configure data access credentials"),s("li",null,"Data will be automatically synced to this interface")])],-1))]),_:1})]),_:1})])}}});export{Ce as default};
