import{_ as w}from"./TWhVIJrq.js";import{u as A}from"./DEEVIwE6.js";import{useDomainsApi as S}from"./D0OVFWy-.js";import{q as u,p as T,y as B,c as n,a as t,b as m,w as x,t as l,F as E,G as L,o as r,d as p,C as N,J as f}from"./BUcYa01A.js";import{P as V}from"./CSm6nba8.js";import"./DAzf46mh.js";import"./CYi_maFl.js";import"./vkYvzIJb.js";import"./BDTT5SEM.js";const $={class:"border-b"},F={class:"flex h-16 items-center px-4"},P={class:"ml-auto"},U={class:"flex-1 p-4 md:p-8"},j={class:"flex items-center justify-between mb-6"},q={key:0,class:"text-center py-12"},G={key:1,class:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg"},J={key:2,class:"text-center py-12 bg-card rounded-lg border border-border"},M={key:3,class:"bg-card rounded-lg border border-border overflow-hidden"},z={class:"w-full"},H={class:"px-6 py-4 text-sm text-foreground"},I={class:"px-6 py-4 text-sm text-muted-foreground"},K={class:"px-6 py-4 text-sm text-muted-foreground"},O={class:"px-6 py-4 text-sm text-muted-foreground"},Q={class:"px-6 py-4 text-sm"},R=["onClick"],W=["onClick"],at={__name:"index",setup(X){const g=A(),{getDomains:_,deleteDomain:v}=S(),y=()=>{g.logout()},d=u([]),i=u(!1),a=u(null);T(()=>d.value.length);const h=async()=>{i.value=!0,a.value=null;try{d.value=await _()}catch(s){a.value=s.message}finally{i.value=!1}},b=async s=>{if(confirm("Are you sure you want to delete this domain? This action cannot be undone."))try{await v(s),d.value=d.value.filter(e=>e.id!==s)}catch(e){a.value=e.message}},k=()=>{f("/admin/domains/create")},D=s=>{f(`/admin/domains/${s}`)};return B(()=>{h()}),(s,e)=>{const c=w;return r(),n("div",null,[t("div",$,[t("div",F,[e[1]||(e[1]=t("h1",{class:"text-lg font-semibold"},"Admin Console",-1)),t("div",P,[m(c,{variant:"outline",onClick:y},{default:x(()=>[...e[0]||(e[0]=[p(" Logout ",-1)])]),_:1})])])]),t("div",U,[t("div",j,[e[3]||(e[3]=t("h2",{class:"text-3xl font-bold tracking-tight"},"Domains",-1)),m(c,{onClick:k},{default:x(()=>[m(N(V),{class:"mr-2 h-4 w-4"}),e[2]||(e[2]=p(" Add Domain ",-1))]),_:1})]),i.value?(r(),n("div",q,[...e[4]||(e[4]=[t("p",{class:"text-muted-foreground"},"Loading domains...",-1)])])):a.value?(r(),n("div",G," Error loading domains: "+l(a.value),1)):d.value.length===0?(r(),n("div",J,[...e[5]||(e[5]=[t("p",{class:"text-muted-foreground"},"No domains found. Add your first domain to get started.",-1)])])):(r(),n("div",M,[t("table",z,[e[7]||(e[7]=t("thead",{class:"bg-muted/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Domain"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Users"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Aliases"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Created"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Status"),t("th",{class:"px-6 py-3 text-left text-sm font-medium text-foreground"},"Actions")])],-1)),t("tbody",null,[(r(!0),n(E,null,L(d.value,o=>(r(),n("tr",{key:o.id,class:"border-t border-border"},[t("td",H,l(o.name),1),t("td",I,l(o.user_count||0),1),t("td",K,l(o.alias_count||0),1),t("td",O,l(new Date(o.created_at).toLocaleDateString()),1),e[6]||(e[6]=t("td",{class:"px-6 py-4 text-sm"},[t("span",{class:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1)),t("td",Q,[t("button",{onClick:C=>D(o.id),class:"text-primary hover:underline mr-2"}," Edit ",8,R),t("button",{onClick:C=>b(o.id),class:"text-red-600 hover:underline"}," Delete ",8,W)])]))),128))])])]))])])}}};export{at as default};
