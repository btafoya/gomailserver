{"version":3,"file":"auth-D52HKU5l.js","sources":["../../../../stores/auth.ts"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { useRouter } from 'vue-router'\n\nexport const useAuthStore = defineStore('auth', {\n  state: () => ({\n    token: null as string | null,\n    user: null as any,\n    isAuthenticated: false\n  }),\n\n  getters: {\n    getToken: (state) => state.token,\n    getUser: (state) => state.user,\n    isLoggedIn: (state) => state.isAuthenticated\n  },\n\n  actions: {\n    initializeAuth() {\n      const token = localStorage.getItem('token')\n      if (token) {\n        this.token = token\n        this.isAuthenticated = true\n        // TODO: Validate token and fetch user info\n      }\n    },\n\n    async login(credentials: { email: string, password: string }) {\n      try {\n        const { $api } = useNuxtApp()\n        const response = await $api.post('/auth/login', credentials)\n\n        this.token = response.data.token\n        this.isAuthenticated = true\n\n        localStorage.setItem('token', this.token)\n\n        // Redirect to portal for logged in users\n        const router = useRouter()\n        await router.push('/portal')\n\n        return response.data\n      } catch (error) {\n        throw error\n      }\n    },\n\n    logout() {\n      this.token = null\n      this.user = null\n      this.isAuthenticated = false\n      localStorage.removeItem('token')\n\n      const router = useRouter()\n      router.push('/login')\n    },\n\n    checkAuth() {\n      const token = localStorage.getItem('token')\n      if (token) {\n        this.token = token\n        this.isAuthenticated = true\n        return true\n      }\n      return false\n    }\n  }\n})"],"names":[],"mappings":";;;AAGO,MAAM,eAAe,YAAY,QAAQ;AAAA,EAC9C,OAAO,OAAO;AAAA,IACZ,OAAO;AAAA,IACP,MAAM;AAAA,IACN,iBAAiB;AAAA,EAAA;AAAA,EAGnB,SAAS;AAAA,IACP,UAAU,CAAC,UAAU,MAAM;AAAA,IAC3B,SAAS,CAAC,UAAU,MAAM;AAAA,IAC1B,YAAY,CAAC,UAAU,MAAM;AAAA,EAAA;AAAA,EAG/B,SAAS;AAAA,IACP,iBAAiB;AACf,YAAM,QAAQ,aAAa,QAAQ,OAAO;AAC1C,UAAI,OAAO;AACT,aAAK,QAAQ;AACb,aAAK,kBAAkB;AAAA,MAEzB;AAAA,IACF;AAAA,IAEA,MAAM,MAAM,aAAkD;AAC5D,UAAI;AACF,cAAM,EAAE,KAAA,IAAS,WAAA;AACjB,cAAM,WAAW,MAAM,KAAK,KAAK,eAAe,WAAW;AAE3D,aAAK,QAAQ,SAAS,KAAK;AAC3B,aAAK,kBAAkB;AAEvB,qBAAa,QAAQ,SAAS,KAAK,KAAK;AAGxC,cAAM,SAAS,UAAA;AACf,cAAM,OAAO,KAAK,SAAS;AAE3B,eAAO,SAAS;AAAA,MAClB,SAAS,OAAO;AACd,cAAM;AAAA,MACR;AAAA,IACF;AAAA,IAEA,SAAS;AACP,WAAK,QAAQ;AACb,WAAK,OAAO;AACZ,WAAK,kBAAkB;AACvB,mBAAa,WAAW,OAAO;AAE/B,YAAM,SAAS,UAAA;AACf,aAAO,KAAK,QAAQ;AAAA,IACtB;AAAA,IAEA,YAAY;AACV,YAAM,QAAQ,aAAa,QAAQ,OAAO;AAC1C,UAAI,OAAO;AACT,aAAK,QAAQ;AACb,aAAK,kBAAkB;AACvB,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,EAAA;AAEJ,CAAC;"}