import{i as me,_ as Z,u as _,a as pe,b as ge}from"./DDmWfC93.js";import{e as Q,g as ve,i as W,r as z,f as p,m as x,h as F,_ as Y,j as R,c as v,o as y,a as S,k as I,l as O,n as j,p as h,b as $,q as D,s as ye,v as ee,x as he,y as N,z as be,A as B,F as q,d as E,t as G,B as te,C as ne,D as J,E as Se,G as Ie,H as we,I as $e,w as U,J as C}from"./B65yq0Zd.js";import{_ as ze}from"./DFEWJnoj.js";import{u as ke}from"./vVceqDKj.js";import"./dID2oTpJ.js";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=()=>{};function Ce(e,n){function a(...t){return new Promise((r,s)=>{Promise.resolve(e(()=>n.apply(this,t),{fn:n,thisArg:this,args:t})).then(r).catch(s)})}return a}function je(e,n={}){let a,t,r=X;const s=u=>{clearTimeout(u),r(),r=X};let l;return u=>{const m=Q(e),d=Q(n.maxWait);return a&&s(a),m<=0||d!==void 0&&d<=0?(t&&(s(t),t=void 0),Promise.resolve(u())):new Promise((o,c)=>{r=n.rejectOnCancel?c:o,l=u,d&&!t&&(t=setTimeout(()=>{a&&s(a),t=void 0,o(l())},d)),a=setTimeout(()=>{t&&s(t),t=void 0,o(u())},m)})}}function Be(e,n=200,a={}){return Ce(je(n,a),e)}const T=new Map;function Ee(e){const n=ve();function a(i){var u;const m=T.get(e)||new Set;m.add(i),T.set(e,m);const d=()=>r(i);return(u=n?.cleanups)==null||u.push(d),d}function t(i){function u(...m){r(u),i(...m)}return a(u)}function r(i){const u=T.get(e);u&&(u.delete(i),u.size||s())}function s(){T.delete(e)}function l(i,u){var m;(m=T.get(e))==null||m.forEach(d=>d(i,u))}return{on:a,once:t,off:r,emit:l,reset:s}}const Fe=(e,n,a=!0)=>{const t=W("form-events",void 0),r=W("form-group",void 0),s=W("form-inputs",void 0);r&&(!a||e?.legend?r.inputId.value=void 0:e?.id&&(r.inputId.value=e?.id),s&&(s.value[r.name.value]=r.inputId.value));const l=z(!1);function i(o,c){t&&t.emit({type:o,path:c})}function u(){i("blur",r?.name.value),l.value=!0}function m(){i("change",r?.name.value)}const d=Be(()=>{(l.value||r?.eagerValidation.value)&&i("input",r?.name.value)},300);return{inputId:p(()=>e?.id??r?.inputId.value),name:p(()=>e?.name??r?.name.value),size:p(()=>{const o=n.size[r?.size.value]?r?.size.value:null;return e?.size??o??n.default?.size}),color:p(()=>r?.error?.value?"red":e?.color),emitFormBlur:u,emitFormInput:d,emitFormChange:m}},Oe={wrapper:"",inner:"",label:{wrapper:"flex content-center items-center justify-between",base:"block font-medium text-gray-700 dark:text-gray-200",required:"after:content-['*'] after:ms-0.5 after:text-red-500 dark:after:text-red-400"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},container:"mt-1 relative",description:"text-gray-500 dark:text-gray-400",hint:"text-gray-500 dark:text-gray-400",help:"mt-2 text-gray-500 dark:text-gray-400",error:"mt-2 text-red-500 dark:text-red-400",default:{size:"sm"}},w=x(F.ui.strategy,F.ui.input,me),Ve=R({components:{UIcon:Z},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>w.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(w.size).includes(e)}},color:{type:String,default:()=>w.default.color,validator(e){return[...F.ui.colors,...Object.keys(w.color)].includes(e)}},variant:{type:String,default:()=>w.default.variant,validator(e){return[...Object.keys(w.variant),...Object.values(w.color).flatMap(n=>Object.keys(n))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:n,slots:a}){const{ui:t,attrs:r}=_("input",D(e,"ui"),w,D(e,"class")),{size:s,rounded:l}=pe({ui:t,props:e}),{emitFormBlur:i,emitFormInput:u,size:m,color:d,inputId:o,name:c}=Fe(e,w),f=p(()=>s.value??m.value),b=z(ye({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),k=z(null),V=()=>{e.autofocus&&k.value?.focus()},H=g=>{b.value.trim&&(g=g.trim()),(b.value.number||e.type==="number")&&(g=be(g)),b.value.nullify&&(g||=null),n("update:modelValue",g),u()},ae=g=>{b.value.lazy||H(g.target.value)},re=g=>{if(e.type==="file"){const A=g.target.files;n("change",A)}else{const A=g.target.value;n("change",A),b.value.lazy&&H(A),b.value.trim&&(g.target.value=A.trim())}},le=g=>{i(),n("blur",g)};ee(()=>{setTimeout(()=>{V()},e.autofocusDelay)});const ie=p(()=>{const g=t.value.color?.[d.value]?.[e.variant]||t.value.variant[e.variant];return he(N(t.value.base,t.value.form,l.value,t.value.placeholder,e.type==="file"&&t.value.file.base,t.value.size[f.value],e.padded?t.value.padding[f.value]:"p-0",g?.replaceAll("{color}",d.value),(M.value||a.leading)&&t.value.leading.padding[f.value],(K.value||a.trailing)&&t.value.trailing.padding[f.value]),e.inputClass)}),M=p(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),K=p(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),oe=p(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),se=p(()=>e.loading&&!M.value?e.loadingIcon:e.trailingIcon||e.icon),ue=p(()=>N(t.value.icon.leading.wrapper,t.value.icon.leading.pointer,t.value.icon.leading.padding[f.value])),de=p(()=>N(t.value.icon.base,d.value&&F.ui.colors.includes(d.value)&&t.value.icon.color.replaceAll("{color}",d.value),t.value.icon.size[f.value],e.loading&&t.value.icon.loading)),fe=p(()=>N(t.value.icon.trailing.wrapper,t.value.icon.trailing.pointer,t.value.icon.trailing.padding[f.value])),ce=p(()=>N(t.value.icon.base,d.value&&F.ui.colors.includes(d.value)&&t.value.icon.color.replaceAll("{color}",d.value),t.value.icon.size[f.value],e.loading&&!M.value&&t.value.icon.loading));return{ui:t,attrs:r,name:c,inputId:o,input:k,isLeading:M,isTrailing:K,inputClass:ie,leadingIconName:oe,leadingIconClass:de,leadingWrapperIconClass:ue,trailingIconName:se,trailingIconClass:ce,trailingWrapperIconClass:fe,onInput:ae,onChange:re,onBlur:le}}}),Ae=["id","name","type","required","placeholder","disabled"];function Ne(e,n,a,t,r,s){const l=Z;return y(),v("div",{class:h(e.type==="hidden"?"hidden":e.ui.wrapper)},[S("input",j({id:e.inputId,ref:"input",name:e.name,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.type==="file"?e.attrs:{...e.attrs,value:e.modelValue},{onInput:n[0]||(n[0]=(...i)=>e.onInput&&e.onInput(...i)),onBlur:n[1]||(n[1]=(...i)=>e.onBlur&&e.onBlur(...i)),onChange:n[2]||(n[2]=(...i)=>e.onChange&&e.onChange(...i))}),null,16,Ae),I(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(y(),v("span",{key:0,class:h(e.leadingWrapperIconClass)},[I(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[$(l,{name:e.leadingIconName,class:h(e.leadingIconClass)},null,8,["name","class"])])],2)):O("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(y(),v("span",{key:1,class:h(e.trailingWrapperIconClass)},[I(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[$(l,{name:e.trailingIconName,class:h(e.trailingIconClass)},null,8,["name","class"])])],2)):O("",!0)],2)}const qe=Y(Ve,[["render",Ne]]),P=x(F.ui.strategy,F.ui.formGroup,Oe),Ge=R({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(P.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},eagerValidation:{type:Boolean,default:!1}},setup(e){const{ui:n,attrs:a}=_("formGroup",D(e,"ui"),P,D(e,"class")),t=W("form-errors",null),r=p(()=>e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:t?.value?.find(i=>i.path===e.name)?.message),s=p(()=>n.value.size[e.size??P.default.size]),l=z(ne());return J("form-group",{error:r,inputId:l,name:p(()=>e.name),size:p(()=>e.size),eagerValidation:p(()=>e.eagerValidation)}),{ui:n,attrs:a,inputId:l,size:s,error:r}}}),Ue=["for"];function Te(e,n,a,t,r,s){return y(),v("div",j({class:e.ui.wrapper},e.attrs),[S("div",{class:h(e.ui.inner)},[e.label||e.$slots.label?(y(),v("div",{key:0,class:h([e.ui.label.wrapper,e.size])},[S("label",{for:e.inputId,class:h([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?I(e.$slots,"label",B(j({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(y(),v(q,{key:1},[E(G(e.label),1)],64))],10,Ue),e.hint||e.$slots.hint?(y(),v("span",{key:0,class:h([e.ui.hint])},[e.$slots.hint?I(e.$slots,"hint",B(j({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(y(),v(q,{key:1},[E(G(e.hint),1)],64))],2)):O("",!0)],2)):O("",!0),e.description||e.$slots.description?(y(),v("p",{key:1,class:h([e.ui.description,e.size])},[e.$slots.description?I(e.$slots,"description",B(j({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(y(),v(q,{key:1},[E(G(e.description),1)],64))],2)):O("",!0)],2),S("div",{class:h([e.label?e.ui.container:""])},[I(e.$slots,"default",B(te({error:e.error}))),typeof e.error=="string"&&e.error?(y(),v("p",{key:0,class:h([e.ui.error,e.size])},[e.$slots.error?I(e.$slots,"error",B(j({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(y(),v(q,{key:1},[E(G(e.error),1)],64))],2)):e.help||e.$slots.help?(y(),v("p",{key:1,class:h([e.ui.help,e.size])},[e.$slots.help?I(e.$slots,"help",B(j({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(y(),v(q,{key:1},[E(G(e.help),1)],64))],2)):O("",!0)],2)],16)}const Me=Y(Ge,[["render",Te]]);class L extends Error{constructor(n){super(n),this.message=n,Object.setPrototypeOf(this,L.prototype)}}const We=R({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:n,emit:a}){const t=ne(),r=Ee(`form-${t}`),s=z(null);ee(()=>{r.on(async o=>{o.type!=="submit"&&e.validateOn?.includes(o.type)&&await m(o.path,{silent:!0})})}),Ie(()=>{r.reset()});const l=z([]);J("form-errors",l),J("form-events",r);const i=z({});J("form-inputs",i);async function u(){let o=await e.validate(e.state);if(e.schema){const{errors:c,result:f}=await Ze(e.state,e.schema);c?o=o.concat(c):s.value=f}return o}async function m(o,c={silent:!1}){let f=o;if(o&&!Array.isArray(o)&&(f=[o]),f){const b=l.value.filter(V=>!f.includes(V.path)),k=(await u()).filter(V=>f.includes(V.path));l.value=b.concat(k)}else l.value=await u();if(l.value.length>0){if(c.silent)return!1;throw new L(`Form validation failed: ${JSON.stringify(l.value,null,2)}`)}return e.state}async function d(o){const c=o;try{e.validateOn?.includes("submit")&&await m(),c.data=e.schema?s.value:e.state,a("submit",c)}catch(f){if(!(f instanceof L))throw f;const b={...c,errors:l.value.map(k=>({...k,id:i.value[k.path]}))};a("error",b)}}return n({validate:m,errors:l,setErrors(o,c){c?l.value=l.value.filter(f=>f.path!==c).concat(o):l.value=o},async submit(){await d(new Event("submit"))},getErrors(o){return o?l.value.filter(c=>c.path===o):l.value},clear(o){o?l.value=l.value.filter(c=>c.path!==o):l.value=[]}}),{onSubmit:d,errors:we(l)}}});function Je(e){return e.validate&&e.__isYupSchema__}function De(e){return e.inner!==void 0}function Le(e){return"schema"in e&&typeof e.coercer=="function"&&typeof e.validator=="function"&&typeof e.refiner=="function"}function Pe(e){return e.validateAsync!==void 0&&e.id!==void 0}function Ye(e){return e.isJoi===!0}function Re(e){return"~standard"in e}async function He(e,n){const a=await n["~standard"].validate(e);return!a.issues||a.issues.length===0?{errors:null,result:"value"in a?a.value:null}:{errors:a.issues.map(r=>({path:r.path?.map(s=>typeof s=="object"?s.key:s).join(".")||"",message:r.message})),result:null}}async function Ke(e,n){try{return{errors:null,result:await n.validateAsync(e,{abortEarly:!1})}}catch(a){if(Ye(a))return{errors:a.details.map(r=>({path:r.path.join("."),message:r.message})),result:null};throw a}}async function Qe(e,n){const[a,t]=n.validate(e);return a?{errors:a.failures().map(s=>({message:s.message,path:s.path.join(".")})),result:null}:{errors:null,result:t}}async function Xe(e,n){try{return{errors:null,result:await n.validate(e,{abortEarly:!1})}}catch(a){if(De(a))return{errors:a.inner.map(r=>({path:r.path??"",message:r.message})),result:null};throw a}}function Ze(e,n){if(Re(n))return He(e,n);if(Pe(n))return Ke(e,n);if(Je(n))return Xe(e,n);if(Le(n))return Qe(e,n);throw new Error("Form validation failed: Unsupported form schema")}function _e(e,n,a,t,r,s){return y(),v("form",{onSubmit:n[0]||(n[0]=Se((...l)=>e.onSubmit&&e.onSubmit(...l),["prevent"]))},[I(e.$slots,"default",B(te({errors:e.errors})))],32)}const xe=Y(We,[["render",_e]]),et={class:"min-h-screen bg-background"},tt={class:"flex min-h-screen items-center justify-center"},nt={class:"w-full max-w-md space-y-8"},at={class:"text-center"},ut={__name:"login",setup(e){const n=ke(),a=$e({email:"",password:""}),t=z(!1),r={email:{type:"string",required:!0},password:{type:"string",required:!0}},s=async()=>{t.value=!0;try{await n.login(a)}catch(l){console.error("Login failed:",l)}finally{t.value=!1}};return(l,i)=>{const u=qe,m=Me,d=ge,o=xe,c=ze;return y(),v("div",et,[S("div",tt,[S("div",nt,[i[4]||(i[4]=S("div",{class:"text-center"},[S("h1",{class:"text-3xl font-bold text-foreground"},"Admin Login"),S("p",{class:"mt-2 text-muted-foreground"},"Sign in to access the admin panel")],-1)),$(o,{schema:r,state:C(a),class:"space-y-4",onSubmit:s},{default:U(()=>[$(m,{label:"Email",name:"email"},{default:U(()=>[$(u,{modelValue:C(a).email,"onUpdate:modelValue":i[0]||(i[0]=f=>C(a).email=f),type:"email",placeholder:"admin@example.com",required:""},null,8,["modelValue"])]),_:1}),$(m,{label:"Password",name:"password"},{default:U(()=>[$(u,{modelValue:C(a).password,"onUpdate:modelValue":i[1]||(i[1]=f=>C(a).password=f),type:"password",placeholder:"Enter your password",required:""},null,8,["modelValue"])]),_:1}),$(d,{type:"submit",block:"",loading:C(t),disabled:C(t)},{default:U(()=>[...i[2]||(i[2]=[E(" Sign In ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["state"]),S("div",at,[$(c,{to:"/portal",class:"text-primary hover:underline"},{default:U(()=>[...i[3]||(i[3]=[E(" Go to User Portal ",-1)])]),_:1})])])])])}}};export{ut as default};
